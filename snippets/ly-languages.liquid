<script>var ShopifyAPI = ShopifyAPI || {};var langify = langify || {};langify.helper = langify.helper || {getSelectedLanguage: function() {var selectedLanguage = '{{ cart.attributes["language"] }}';if(selectedLanguage == '') {selectedLanguage = '{{ shop.metafields["languages"]["default"] }}';}return selectedLanguage;},saveLanguage: function(language) {ShopifyAPI.getCart(function (cart) {var note = cart.note;if(note == 'null') {note = '';}ShopifyAPI.updateCartNote(note, function () {ShopifyAPI.updateCartAttributes({'language': language}, function() {langify.loader.reload();});});});}};langify.loader = langify.loader || {loadScript: function(url, callback) {var script = document.createElement('script');script.type = 'text/javascript';if(script.readyState) {script.onreadystatechange = function () {if(script.readyState == 'loaded' || script.readyState == 'complete') {script.onreadystatechange = null;callback();}};} else {script.onload = function () {callback();};}script.src = url;document.getElementsByTagName('head')[0].appendChild(script);},reload: function() {window.location.reload();}};langify.switcher = langify.switcher || {getSlickSwitcher: function() {var switcher = langify.jquery('select[id="ly-slick-languages-switcher"]');if(switcher.length > 0) {return switcher;}return undefined;},getSwitcher: function() {var switcher = $('select[id="ly-languages-switcher"]');if (switcher.length > 0) {return switcher;}return undefined;},init: function() {var slickSwitcher = langify.switcher.getSlickSwitcher();if(slickSwitcher) {var selectedLanguage = langify.helper.getSelectedLanguage();if(selectedLanguage != '') {slickSwitcher.val(selectedLanguage);}langify.loader.loadScript('{{ "ly-select-box.js" | asset_url }}', function () {slickSwitcher.ddslick({onSelected: function (data) {langify.helper.saveLanguage(data.selectedData.value);}});});}var switcher = langify.switcher.getSwitcher();if(switcher) {var selectedLanguage = langify.helper.getSelectedLanguage();if(selectedLanguage != '') {switcher.val(selectedLanguage);}switcher.change(function () {langify.helper.saveLanguage(switcher.val());});}$('.ly-languages-switcher-link').click(function () {langify.helper.saveLanguage(this.id);});}};langify.translator = langify.translator || {init:function() {var customContents = [];var customTranslations = [];{% for custom in shop.metafields.custom %}{% assign src = custom | last %}{% assign key = custom | first %}{% assign key = key | split: "ly" | last %}{% assign translation_namespace = language | append: "cu" %}{% assign translation_key = "id" | append: key %}{% if shop.metafields[translation_namespace][translation_key] %}{% assign translation = shop.metafields[translation_namespace][translation_key] %}{% assign src = src | replace: '"', 'ly_dq' %}{% assign src = src | replace: "'", 'ly_sq' %}{% assign src = '#ly_cu' | append: src %}{% assign translation = translation | replace: '"', 'ly_dq' %}{% assign translation = translation | replace: "'", 'ly_sq' %}customContents.push('{{ src }}');customTranslations.push('{{ translation }}');{% endif %}{% endfor %}(function($, textFunc) {$.fn.text = function() {if(arguments.length && arguments[0] && typeof arguments[0].replace === 'function') {for(var i = 0; i < customContents.length; ++i) {var customContent = customContents[i].replace(/ly_dq/g, '\"');customContent = customContent.replace(/ly_sq/g, '\'');var customTranslation = customTranslations[i].replace(/ly_dq/g, '\"');customTranslation = customTranslation.replace(/ly_sq/g, '\'');arguments[0] = arguments[0].replace(new RegExp("\\b[^\"\']" + customContent.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&") + "[^\"\']\\b", "g"), customTranslation);if(arguments[0] == customContent) {arguments[0] = arguments[0].replace(customContent, customTranslation);}}}return textFunc.apply(this, arguments);};})(jQuery, jQuery.fn.text);(function($, htmlFunc) {$.fn.html = function() {if(arguments.length && arguments[0] && typeof arguments[0].replace === 'function') {for(var i = 0; i < customContents.length; ++i) {var customContent = customContents[i].replace(/ly_dq/g, '\"');customContent = customContent.replace(/ly_sq/g, '\'');var customTranslation = customTranslations[i].replace(/ly_dq/g, '\"');customTranslation = customTranslation.replace(/ly_sq/g, '\'');arguments[0] = arguments[0].replace(new RegExp("\\b[^\"\']" + customContent.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&") + "[^\"\']\\b", "g"), customTranslation);if(arguments[0] == customContent) {arguments[0] = arguments[0].replace(customContent, customTranslation);}}}return htmlFunc.apply(this, arguments);};})(jQuery, jQuery.fn.html);(function($, valFunc) {$.fn.val = function() {if(arguments.length && arguments[0] && typeof arguments[0].replace === 'function') {for(var i = 0; i < customContents.length; ++i) {var customContent = customContents[i].replace(/ly_dq/g, '\"');customContent = customContent.replace(/ly_sq/g, '\'');var customTranslation = customTranslations[i].replace(/ly_dq/g, '\"');customTranslation = customTranslation.replace(/ly_sq/g, '\'');arguments[0] = arguments[0].replace(new RegExp("\\b[^\"\']" + customContent.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&") + "[^\"\']\\b", "g"), customTranslation);if(arguments[0] == customContent) {arguments[0] = arguments[0].replace(customContent, customTranslation);}}}return valFunc.apply(this, arguments);};})(jQuery, jQuery.fn.val);}};langify.currency = langify.currency || {getHasSelectedCurrency: function() {return '{{ cart.attributes["custom_currency"] }}' == 'true';},getCurrencyForLanguage: function(language) {var languageToCurrencies = [];{% for mf in shop.metafields.lang_to_currency %}{% assign split = mf | first | split: '#' %}{% assign themeId = split | first %}{% assign compareThemeId = 'ly' | append: theme.id %}{% if themeId == compareThemeId %}{% assign languageValue = split | last %}languageToCurrencies['{{ languageValue }}'] = '{{ mf | last }}';{% endif %}{% endfor %}return languageToCurrencies[language];},getCurrencySwitcher: function() {var currencySwitcher = $('#currencies');if(currencySwitcher.length) {return currencySwitcher;} else {return null;}},init: function() {if(!langify.currency.getHasSelectedCurrency()) { {% assign switcher_setting_key = 'ly' | append: theme.id %}{% if shop.metafields.ly_c_switcher[switcher_setting_key] == 'enabled' %}var currencySwitcher = langify.currency.getCurrencySwitcher();if(typeof Currency != 'undefined' && currencySwitcher) {currencySwitcher.change(function() {ShopifyAPI.getCart(function (cart) {var note = cart.note;if(note == 'null') {note = '';}ShopifyAPI.updateCartNote(note, function () {ShopifyAPI.updateCartAttributes({'custom_currency': 'true'},function() {});});});});var selectedLanguage = langify.helper.getSelectedLanguage();var currencyForLanguage = langify.currency.getCurrencyForLanguage(selectedLanguage);if(currencyForLanguage) {var currentCurrency = Currency.cookie.read();Currency.currentCurrency = currencyForLanguage;Currency.cookie.write(currencyForLanguage);Currency.convertAll(currentCurrency, currencyForLanguage);currencySwitcher.val(currencyForLanguage);var selectedCurrencySpan = $('span.selected-currency');if(selectedCurrencySpan.length) {selectedCurrencySpan.text(currencyForLanguage);}}}{% endif %} }}};langify.core = langify.core || {onComplete: function() {ShopifyAPI.attributeToString = function(attribute) {if((typeof attribute) !== 'string') {attribute += '';if(attribute === 'undefined') {attribute = '';}}return jQuery.trim(attribute);};ShopifyAPI.getCart = function(callback) {jQuery.getJSON('/cart.js', function (cart, textStatus) {if((typeof callback) === 'function') {callback(cart);}});};ShopifyAPI.updateCartNote = function(note, callback) {var params = {type: 'POST',url: '/cart/update.js',data: 'note=' + this.attributeToString(note),dataType: 'json',success: function(cart) {if((typeof callback) === 'function') {callback(cart);}},error: this.onError};jQuery.ajax(params);};ShopifyAPI.updateCartAttributes = function(attributes, callback) {var data = '';var that = this;if(jQuery.isArray(attributes)) {jQuery.each(attributes, function(indexInArray, valueOfElement) {var key = that.attributeToString(valueOfElement.key);if (key !== '') {data += 'attributes[' + key + ']=' + that.attributeToString(valueOfElement.value) + '&';}});} else if ((typeof attributes === 'object') && attributes !== null) {jQuery.each(attributes, function(key, value) {data += 'attributes[' + that.attributeToString(key) + ']=' + that.attributeToString(value) + '&';});}var params = {type: 'POST',url: '/cart/update.js',data: data,dataType: 'json',success: function(cart) {if((typeof callback) === 'function') {callback(cart);}},error: this.onError};jQuery.ajax(params);};ShopifyAPI.onError = function(XMLHttpRequest, textStatus) {};langify.switcher.init();langify.translator.init();langify.currency.init();},init: function() {if(typeof jQuery === 'undefined') {langify.loader.loadScript('//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js', function() {langify.jquery = $;langify.core.onComplete();});} else if(parseFloat(jQuery.fn.jquery) < 1.7) {langify.loader.loadScript('//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js', function() {langify.jquery = jQuery.noConflict(true);langify.core.onComplete();});} else {langify.jquery = $;langify.core.onComplete();}}};langify.core.init();</script>