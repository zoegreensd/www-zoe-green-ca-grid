{% if request.host %}{% assign host = request.host %}{% assign domains = shop.metafields.language_domains %}{% for domain in domains %}{% assign key = domain | first %}{% assign value = domain | last | split: ',' %}{% if value contains host %}{% assign language = key %}{% endif %}{% endfor %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% else %}{% assign language = cart.attributes["language"] %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% endif %}{% if template contains 'index' %}  {% if shop.metafields["shop_name"][language] %}    {% assign langify_title = shop.metafields["shop_name"][language] %}  {% else %}    {% assign langify_title = page_title %}  {% endif %}{% elsif template contains 'collection' %}  {% if collection.metafields[language]["page_title"] %}    {% assign langify_title = collection.metafields[language]["page_title"] | replace: "</", " </" | strip_html | strip_newlines | strip %}  {% elsif collection.metafields[language]["title"] %}    {% assign langify_title = collection.metafields[language]["title"] | replace: "</", " </" | strip_html | strip_newlines | strip | truncate: 73 | replace: "...", "" %}  {% else %}    {% assign langify_title = page_title %}  {% endif %}{% elsif template contains 'blog' %}  {% if blog.metafields[language]["page_title"] %}    {% assign langify_title = blog.metafields[language]["page_title"] | replace: "</", " </" | strip_html | strip_newlines | strip %}  {% elsif blog.metafields[language]["title"] %}    {% assign langify_title = blog.metafields[language]["title"] | replace: "</", " </" | strip_html | strip_newlines | strip | truncate: 73 | replace: "...", "" %}  {% else %}    {% assign langify_title = page_title %}  {% endif %}{% elsif template contains 'article' %}  {% if article.metafields[language]["page_title"] %}    {% assign langify_title = article.metafields[language]["page_title"] | replace: "</", " </" | strip_html | strip_newlines | strip %}  {% elsif article.metafields[language]["title"] %}    {% assign langify_title = article.metafields[language]["title"] | replace: "</", " </" | strip_html | strip_newlines | strip | truncate: 73 | replace: "...", "" %}  {% else %}    {% assign langify_title = page_title %}  {% endif %}{% elsif template contains 'page' %}  {% if page.metafields[language]["page_title"] %}    {% assign langify_title = page.metafields[language]["page_title"] | replace: "</", " </" | strip_html | strip_newlines | strip %}  {% elsif page.metafields[language]["title"] %}    {% assign langify_title = page.metafields[language]["title"] | replace: "</", " </" | strip_html | strip_newlines | strip | truncate: 73 | replace: "...", "" %}  {% else %}    {% assign langify_title = page_title %}  {% endif %}{% elsif template contains 'product' %}  {% if product.metafields[language]["page_title"] %}    {% assign langify_title = product.metafields[language]["page_title"] | replace: "</", " </" | strip_html | strip_newlines | strip %}  {% elsif product.metafields[language]["title"] %}    {% assign langify_title = product.metafields[language]["title"] | replace: "</", " </" | strip_html | strip_newlines | strip | truncate: 73 | replace: "...", "" %}  {% else %}    {% assign langify_title = page_title %}  {% endif %}{% else %}  {% assign langify_title = page_title %}{% endif %}{% if template contains 'index' %}  {% if shop.metafields["shop_description"][language] %}    {% assign langify_description = shop.metafields["shop_description"][language] %}  {% else %}    {% assign langify_description = page_description %}  {% endif %}{% elsif template contains 'collection' %}  {% if collection.metafields[language]["page_description"] %}    {% assign langify_description = collection.metafields[language]["page_description"] | replace: "</", " </" | strip_html | strip_newlines | strip %}  {% elsif collection.metafields[language]["description"] %}    {% assign langify_description = collection.metafields[language]["description"] | replace: "</", " </" | strip_html | strip_newlines | strip | truncate: 163 | replace: "...", "" %}  {% else %}    {% assign langify_description = page_description %}  {% endif %}{% elsif template contains 'blog' %}  {% if blog.metafields[language]["page_description"] %}    {% assign langify_description = blog.metafields[language]["page_description"] | replace: "</", " </" | strip_html | strip_newlines | strip %}  {% else %}    {% assign langify_description = page_description %}  {% endif %}{% elsif template contains 'article' %}  {% if article.metafields[language]["page_description"] %}    {% assign langify_description = article.metafields[language]["page_description"] | replace: "</", " </" | strip_html | strip_newlines | strip %}  {% elsif article.metafields[language]["content"] %}    {% assign langify_description = article.metafields[language]["content"] | replace: "</", " </" | strip_html | strip_newlines | strip | truncate: 163 | replace: "...", "" %}  {% else %}    {% assign langify_description = page_description %}  {% endif %}{% elsif template contains 'page' %}  {% if page.metafields[language]["page_description"] %}    {% assign langify_description = page.metafields[language]["page_description"] | replace: "</", " </" | strip_html | strip_newlines | strip %}  {% elsif page.metafields[language]["content"] %}    {% assign langify_description = page.metafields[language]["content"] | replace: "</", " </" | strip_html | strip_newlines | strip | truncate: 163 | replace: "...", "" %}  {% else %}    {% assign langify_description = page_description %}  {% endif %}{% elsif template contains 'product' %}  {% if product.metafields[language]["page_description"] %}    {% assign langify_description = product.metafields[language]["page_description"] | replace: "</", " </" | strip_html | strip_newlines | strip %}  {% elsif product.metafields[language]["description"] %}    {% assign langify_description = product.metafields[language]["description"] | replace: "</", " </" | strip_html | strip_newlines | strip | truncate: 163 | replace: "...", "" %}  {% else %}    {% assign langify_description = page_description %}  {% endif %}{% else %}  {% assign langify_description = page_description %}{% endif %}{% assign langify_shop_name = shop.name %}{% if shop.metafields["shop_name"][language] %}{% assign langify_shop_name = shop.metafields["shop_name"][language] %}{% endif %}{% assign langify_shop_description = shop.description %}{% if shop.metafields["shop_description"][language] %}{% assign langify_shop_description = shop.metafields["shop_description"][language] %}{% endif %}{% assign domain_found = false %}{% assign canonical_langify_url = canonical_url %}{% assign langify_shop_url = shop.url %}{% assign langify_shop_domain = shop.domain %}{% if request.host %}{% assign language = '' %}{% assign domains = shop.metafields.language_domains %}{% for domain in domains %}{% assign key = domain | first %}{% assign value = domain | last | split: ',' %}{% if value contains request.host %}{% assign domain_found = true %}{% assign canonical_langify_url = canonical_langify_url | replace: shop.domain, value[0] %}{% assign langify_shop_url = langify_shop_url | replace: shop.domain, value[0] %}{% assign langify_shop_domain = langify_shop_domain | replace: shop.domain, value[0] %}{% endif %}{% endfor %}{% if domain_found == false %}{% assign default_domains = shop.metafields.language_domains[shop.metafields.languages.default] | split: ',' %}{% assign canonical_langify_url = canonical_langify_url | replace: shop.domain, default_domains[0] %}{% assign langify_shop_url = langify_shop_url | replace: shop.domain, default_domains[0] %}{% assign langify_shop_domain = langify_shop_domain | replace: shop.domain, default_domains[0] %}{% endif %}{% endif %}