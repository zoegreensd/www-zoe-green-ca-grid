{% assign language = cart.attributes["language"] %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% if ly-description.metafields[language]['description'] %}{% assign ly_translation = ly-description.metafields[language]['description'] %}{% elsif ly-description.product.metafields[language]['description'] %}{% assign ly_translation = ly-description.product.metafields[language]['description'] %}{% if ly-title.variant %}{% if ly-title.variant.metafields[language]['title'] %}{% assign ly_translation = ly_translation | append: " - " | append: ly-title.variant.metafields[language]['title'] %}{% endif %}{% endif %}{% elsif ly-description.active != null or ly-description.links != null %}{% assign t = 'li' | append: ly-description.description %}{% assign tw = t | replace: ' ', '' %}{% if shop.metafields[language][t] %}{% assign ly_translation = shop.metafields[language][t] %}{% elsif shop.metafields[language][tw] %}{% assign ly_translation = shop.metafields[language][tw] %}{% else %}{% assign ns = 'li' | append: language %}{% assign key = ly-description.description | md5 | append: '...' | truncate: 33 | remove: '...' %}{% if shop.metafields[ns][key] %}{% assign ly_translation = shop.metafields[ns][key] %}{% else %}{% assign ly_translation = ly-description.description %}{% endif %}{% endif %}{% elsif 'description' == 'vendor' %}{% assign ns = 've' | append: language %}{% if shop.metafields[ns][ly-description.description] %}{% assign ly_translation = shop.metafields[ns][ly-description.description] %}{% else %}{% assign key = ly-description.description | md5 | append: '...' | truncate: 33 | remove: '...' %}{% if shop.metafields[ns][key] %}{% assign ly_translation = shop.metafields[ns][key] %}{% else %}{% assign ly_translation = ly-description.description %}{% endif %}{% endif %}{% elsif 'description' == 'type' %}{% assign ns = 'ty' | append: language %}{% if shop.metafields[ns][ly-description.description] %}{% assign ly_translation = shop.metafields[ns][ly-description.description] %}{% else %}{% assign key = ly-description.description | md5 | append: '...' | truncate: 33 | remove: '...' %}{% if shop.metafields[ns][key] %}{% assign ly_translation = shop.metafields[ns][key] %}{% else %}{% assign ly_translation = ly-description.description %}{% endif %}{% endif %}{% else %}{% assign ly_translation = ly-description.description %}{% endif %}