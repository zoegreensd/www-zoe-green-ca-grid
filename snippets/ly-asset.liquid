{% if request.host %}{% assign host = request.host %}{% assign domains = shop.metafields.language_domains %}{% for domain in domains %}{% assign key = domain | first %}{% assign value = domain | last | split: ',' %}{% if value contains host %}{% assign language = key %}{% endif %}{% endfor %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% else %}{% assign language = cart.attributes["language"] %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% endif %}{% assign ly_translation = ly-asset | asset_url %}{% assign ns = language | append: "#" | append: theme.id %}{% for metafield in shop.metafields[ns] %}{% assign src = ly-asset | md5 | append: "..." | truncate: 33 %}{% assign translation_src = metafield | first | append: "..."%}{% if src == translation_src %}{% assign ly_translation = metafield | last | asset_url %}{% endif %}{% endfor %}